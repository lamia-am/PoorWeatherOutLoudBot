# PoorWeatherOutLoudBot
Telegram bot

Описание устройства работы телеграм бота.

Вначале был создан в телеграме бот с именем @PoorWeatherOutLoudBot c помощью @BotFather.<br>
Далее был создан аккаунт на Amazon AWS. Создан API Gateway и установлен на него WebHook телеграм-бота.<br>
Была создана лямбда-функция для обработки пришедших запросов. Далее будем говорить о ней.<br>
Лямбда-функция это фунция на питоне от пришедшего сообщения:<br>
Сначала в тексте сообщения ищутся слова означающие дату, на которую нужен прогноз: понедельник, вторник...завтра, послезавтра, сегодня
Если тексте нет этих слов, но есть слово 'прогноз', ты ищется прогноз на 24 часа. Иначе же выдается погода сейчас.<br>
Теперь о том, как ищется прогноз.<br>
Сначала хотим получить географические координаты искомого города. Для этого сначала стараемся очистить текст сообщения от слов, которые не означают город как 'погода' или 'завтра'. Затем, с помощью API Geocoder Yandex получаем по тексту координаты города.<br>
Имея координаты, воспользуемся API Openweathermap, чтобы получить прогноз по этим координатам.
Удобно, что в ответах этого api есть и словестное описание погоды.<br>
Мы хотим отвечать не только словестныи сообщением о погоде, но показывать изображение города при такой погоде. Для поиска картинок воспользуемся API Bing. Сформируем запрос из того, что мы подавли на вход геокодеру, и словестного описания погоды. Выберем случайную куртинку из первых.
